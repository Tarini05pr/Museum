<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Tarini Pabbareddy">
  <title>Museum Shop</title>
  <meta name="description" content="Museum Shop">
  <meta name="keywords" content="Museum, Shop">
  <link rel="stylesheet" href="../css/shop-style.css" type="text/css">
</head>
<body>
  <nav class="navbar">
    <ul>
      <li><a href="../index.html">Home</a></li>
      <li><a href="collections-index.html">Collections</a></li>
      <li><a href="staff-index.html">Staff</a></li>
      <li><a href="shop.html" class="active">Shop</a></li>
    </ul>
    <button id="viewCartBtn" onclick="location.href='cart-index.html'">View Cart</button>
  </nav>

  <header>
    <h1>Museum Souvenir Shop</h1>
    <p>Take a piece of history home with you</p>
  </header>

  <section class="shop-container">

    <div class="shop-item">
      <img src="../images/shop/ME-artifact.jpg" alt="Limestone Carving" class="item-img" data-tooltip="Replica of the Starbone Fossil">
      <h2>Limestone Carving</h2>
      <span class="qty-badge" aria-live="polite"></span>
      <p class="description">Carved limestone votive figure discovered at Tell Asmar, Iraq.</p>
      <p class="price">$25.00</p>
      <button 
        onclick="addToCart(this)" 
        data-id="item001" 
        data-name="Limestone Carving" 
        data-price="25.00"
        data-image="../images/shop/ME-artifact.jpg">
        Add Limestone Carving Replica to Cart
      </button>
    </div>

    <div class="shop-item">
      <img src="../images/shop/SA-artifact.jpg" alt="Stone Arrowhead" class="item-img" data-tooltip="Scent of the Coral Queen incense, crafted in the style of Deep Ur priests.">
      <h2>Stone Arrowhead</h2>
      <span class="qty-badge" aria-live="polite"></span>
      <p class="description">Obsidian arrowhead from the Andean highlands near Cuzco, Peru.</p>
      <p class="price">$15.00</p>
      <button 
        onclick="addToCart(this)" 
        data-id="item002" 
        data-name="Stone Arrowhead" 
        data-price="15.00"
        data-image="../images/shop/SA-artifact.jpg">
        Add Arrowhead to Cart
      </button>
    </div>

    <div class="shop-item">
      <img src="../images/shop/AF-artifact.jpg" alt="Mummified Stone Jug" class="item-img" data-tooltip="Forged in the spirit of the Moon Priestâ€™s Bronze Dagger.">
      <h2>Mummified Stone Jug</h2>
      <span class="qty-badge" aria-live="polite"></span>
      <p class="description">Steatite jug discovered at Great Zimbabwe, used in ritual ceremonies.</p>
      <p class="price">$40.00</p>
      <button 
        onclick="addToCart(this)" 
        data-id="item003" 
        data-name="Mummified Stone Jug" 
        data-price="40.00"
        data-image="../images/shop/AF-artifact.jpg">
        Add Mummified Stone Jug to Cart
      </button>
    </div>

    <div class="shop-item">
      <img src="../images/shop/SA-Jewel.jpg" alt="Tiwanaku Sun Pendant" class="item-img" data-tooltip="Inspired by the radiant headdress of Viracocha.">
      <h2>Tiwanaku Sun Pendant</h2>
      <span class="qty-badge" aria-live="polite"></span>
      <p class="description">Hammered gold alloy pendant from northern Peru, worn in ritual practice.</p>
      <p class="price">$30.00</p>
      <button 
        onclick="addToCart(this)" 
        data-id="item004" 
        data-name="Tiwanaku Sun Pendant" 
        data-price="30.00"
        data-image="../images/shop/SA-Jewel.jpg">
        Add Tiwanaku Sun Pendant to Cart
      </button>
    </div>

  </section>

  <div id="modal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modal-img" alt="">
    <div id="caption"></div>
  </div>
<footer>
    <p style="margin-top: 0.5rem; font-size: 0.85rem; color: #aaa;">
      This is a fictitious website created purely for academic purposes. The content on this site was conceived by a human and created by AI. The images were created by AI and curated, edited, reviewed, verified, validated and augmented by a human.
    </p>
  </footer>
  <script>
    const CART_KEY = 'museumCartV1';

function readCart() {
  try { return JSON.parse(localStorage.getItem(CART_KEY)) || []; }
  catch { return []; }
}

function writeCart(cart) {
  localStorage.setItem(CART_KEY, JSON.stringify(cart));
}

function addToCart(btn) {
  const id = btn.dataset.id;
  const name = btn.dataset.name;
  const unitPrice = Number(btn.dataset.price);
  const image = btn.dataset.image;

  let cart = readCart();
  const idx = cart.findIndex(it => it.id === id);
  if (idx >= 0) {
    cart[idx].qty += 1;
  } else {
    cart.push({ id, name, unitPrice, qty: 1, image });
  }
  writeCart(cart);

  // Update qty badge
  const card = btn.closest('.shop-item');
  if (card) {
    const badge = card.querySelector('.qty-badge');
    if (badge) {
      const item = cart.find(it => it.id === id);
      badge.textContent = item ? `Qty: ${item.qty}` : '';
    }
  }
}

// --- Image Modal ---
const modal = document.getElementById("modal");
const modalImg = document.getElementById("modal-img");
const captionText = document.getElementById("caption");
const closeBtn = document.querySelector(".close");

document.querySelectorAll(".item-img").forEach(img => {
  img.addEventListener("click", () => {
    modal.style.display = "block";
    modalImg.src = img.src;
    captionText.innerHTML = img.alt;
  });
});

if (closeBtn) closeBtn.onclick = () => { modal.style.display = "none"; };

// --- Tooltip ---
document.querySelectorAll(".item-img").forEach(img => {
  img.addEventListener("mouseover", e => {
    const tooltip = document.createElement("div");
    tooltip.className = "tooltip";
    tooltip.innerText = img.getAttribute("data-tooltip");
    document.body.appendChild(tooltip);
    tooltip.style.left = (e.pageX + 10) + "px";
    tooltip.style.top = (e.pageY + 10) + "px";
    img.addEventListener("mousemove", ev => {
      tooltip.style.left = (ev.pageX + 10) + "px";
      tooltip.style.top = (ev.pageY + 10) + "px";
    });
    img.addEventListener("mouseout", () => tooltip.remove());
  });
});

  </script>
</body>
</html>
